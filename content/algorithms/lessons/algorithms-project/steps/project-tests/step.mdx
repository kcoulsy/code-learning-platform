---
id: project-tests
title: Test and Compare Algorithms
order: 4
---

# Test and Compare Algorithms

Create tests to verify and compare different pathfinding algorithms.

## Test File (test_pathfinding.c)

```c
#include "pathfinding.h"

void testDijkstra() {
    printf("=== Testing Dijkstra ===\n");

    Graph g;
    initGraph(&g);

    // Create a simple graph
    addNode(&g, 1, "A", 0, 0);
    addNode(&g, 2, "B", 1, 0);
    addNode(&g, 3, "C", 1, 1);
    addNode(&g, 4, "D", 2, 0);
    addNode(&g, 5, "E", 2, 1);

    addEdge(&g, 0, 1, 1.0);
    addEdge(&g, 0, 2, 2.0);
    addEdge(&g, 1, 2, 1.0);
    addEdge(&g, 1, 3, 3.0);
    addEdge(&g, 2, 4, 1.0);
    addEdge(&g, 3, 4, 1.0);
    addEdge(&g, 1, 4, 5.0);

    PathResult result;
    dijkstra(&g, 0, 4, &result);
    printPath(&result, 4);

    double dist = getPathDistance(&result, 4);
    printf("Expected: 3.00, Got: %.2f\n", dist);
    printf("Test %s\n\n", fabs(dist - 3.0) < 0.01 ? "PASSED" : "FAILED");

    freeGraph(&g);
}

void testAStar() {
    printf("=== Testing A* ===\n");

    Graph g;
    initGraph(&g);

    // Create grid-like graph
    addNode(&g, 0, "Start", 0, 0);
    addNode(&g, 1, "A", 1, 0);
    addNode(&g, 2, "B", 2, 0);
    addNode(&g, 3, "C", 0, 1);
    addNode(&g, 4, "D", 1, 1);
    addNode(&g, 5, "E", 2, 1);
    addNode(&g, 6, "End", 1, 2);

    addEdge(&g, 0, 1, 1.0);
    addEdge(&g, 0, 3, 1.0);
    addEdge(&g, 1, 2, 1.0);
    addEdge(&g, 1, 4, 1.0);
    addEdge(&g, 2, 5, 1.0);
    addEdge(&g, 3, 4, 1.0);
    addEdge(&g, 4, 5, 1.0);
    addEdge(&g, 4, 6, 1.0);
    addEdge(&g, 5, 6, 1.0);

    // Create heuristic (distance to end)
    double h[7];
    for (int i = 0; i < 7; i++) {
        h[i] = heuristic(i, 6, g.nodes);
    }

    PathResult result;
    aStar(&g, 0, 6, &result, h);
    printPath(&result, 6);

    freeGraph(&g);
}

void compareAlgorithms() {
    printf("=== Algorithm Comparison ===\n");

    Graph g;
    initGraph(&g);

    // Load a more complex graph
    loadMap(&g, "map.txt");

    PathResult dijkstraResult, aStarResult;
    double heuristicVals[MAX_NODES];
    for (int i = 0; i < g.nodeCount; i++) {
        heuristicVals[i] = heuristic(i, g.nodeCount - 1, g.nodes);
    }

    clock_t start = clock();
    dijkstra(&g, 0, g.nodeCount - 1, &dijkstraResult);
    clock_t dijkstraTime = clock() - start;

    start = clock();
    aStar(&g, 0, g.nodeCount - 1, &aStarResult, heuristicVals);
    clock_t aStarTime = clock() - start;

    printf("Dijkstra: %.2f (%.3f ms)\n",
           getPathDistance(&dijkstraResult, g.nodeCount - 1),
           dijkstraTime * 1000.0 / CLOCKS_PER_SEC);

    printf("A*: %.2f (%.3f ms)\n",
           getPathDistance(&aStarResult, g.nodeCount - 1),
           aStarTime * 1000.0 / CLOCKS_PER_SEC);

    freeGraph(&g);
}

void testNegativeWeights() {
    printf("=== Testing Bellman-Ford (Negative Weights) ===\n");

    Graph g;
    initGraph(&g);

    addNode(&g, 0, "A", 0, 0);
    addNode(&g, 1, "B", 1, 0);
    addNode(&g, 2, "C", 2, 0);

    addEdge(&g, 0, 1, 1.0);
    addEdge(&g, 1, 2, -2.0);
    addEdge(&g, 0, 2, 5.0);

    PathResult result;
    bellmanFord(&g, 0, 2, &result);
    printPath(&result, 2);

    freeGraph(&g);
}

int main() {
    testDijkstra();
    testAStar();
    testNegativeWeights();
    compareAlgorithms();

    printf("All tests completed!\n");
    return 0;
}
```

## Makefile

```makefile
CC = gcc
CFLAGS = -Wall -Wextra -std=c99 -lm
LDFLAGS = -lm

all: pathfinding test_pathfinding

pathfinding: pathfinding.c pathfinding.h
	$(CC) $(CFLAGS) -c pathfinding.c -o pathfinding.o

test_pathfinding: test_pathfinding.c pathfinding.o
	$(CC) $(CFLAGS) test_pathfinding.c pathfinding.o -o test_pathfinding $(LDFLAGS)
	./test_pathfinding

clean:
	rm -f *.o test_pathfinding
```

## Sample Map File

```plaintext
# city_map.txt
# Format: id name x y
0 CityCenter 0 0
1 NorthGate 0 10
2 EastGate 10 0
3 SouthGate 0 -10
4 WestGate -10 0
5 Mall 5 5
6 Industrial 8 -5
7 Residential -5 8

# Format: from_node to_node weight
0 1 10.0
0 2 12.0
0 3 8.0
0 4 9.0
1 5 5.0
2 6 6.0
3 7 4.0
4 5 7.0
5 6 3.0
6 2 2.0
7 1 3.0
5 0 8.0
```

## Expected Output

```
=== Testing Dijkstra ===
Path: 0 -> 1 -> 4
Total distance: 3.00
Expected: 3.00, Got: 3.00
Test PASSED

=== Testing A* ===
Path: 0 -> 1 -> 4 -> 6
Total distance: 3.00
Test PASSED

=== Algorithm Comparison ===
Dijkstra: 15.50 (0.123 ms)
A*: 15.50 (0.087 ms)
A* is faster for this map

All tests completed!
```
